{"ast":null,"code":"import React, { useEffect, useRef, useState } from 'react';\nimport { Animated, useWindowDimensions, View } from 'react-native';\nimport Surface from './Surface';\nimport { useStyles } from './hooks/use-styles';\n\nconst Backdrop = _ref => {\n  let {\n    revealed = false,\n    header,\n    headerHeight,\n    backLayer,\n    backLayerHeight,\n    subheader,\n    subheaderHeight,\n    style,\n    headerContainerStyle,\n    backLayerContainerStyle,\n    frontLayerContainerStyle,\n    subheaderContainerStyle,\n    children\n  } = _ref;\n  const [currentHeaderHeight, setCurrentHeaderHeight] = useState(headerHeight !== null && headerHeight !== void 0 ? headerHeight : 0);\n  const [currentBackLayerHeight, setCurrentBackLayerHeight] = useState(backLayerHeight !== null && backLayerHeight !== void 0 ? backLayerHeight : 0);\n  const [currentSubheaderHeight, setCurrentSubheaderHeight] = useState(subheaderHeight !== null && subheaderHeight !== void 0 ? subheaderHeight : 0);\n  const styles = useStyles(_ref2 => {\n    let {\n      palette\n    } = _ref2;\n    return {\n      container: {\n        flex: 1,\n        backgroundColor: palette.primary.main,\n        overflow: 'hidden'\n      },\n      frontLayer: {\n        position: 'absolute',\n        start: 0,\n        end: 0,\n        bottom: 0,\n        backgroundColor: palette.surface.main,\n        borderTopStartRadius: 16,\n        borderTopEndRadius: 16,\n        borderBottomStartRadius: 0,\n        borderBottomEndRadius: 0,\n        elevation: 1\n      }\n    };\n  });\n  const animated = useRef(new Animated.Value(revealed ? 1 : 0)).current;\n  useEffect(() => {\n    Animated.timing(animated, {\n      toValue: revealed ? 1 : 0,\n      duration: 300,\n      useNativeDriver: true\n    }).start();\n  }, [revealed]);\n  const dimensions = useWindowDimensions();\n  const translateY = animated.interpolate({\n    inputRange: [0, 1],\n    outputRange: [0, dimensions.height < currentHeaderHeight + currentBackLayerHeight ? dimensions.height - currentHeaderHeight - currentSubheaderHeight : currentBackLayerHeight]\n  });\n  return /*#__PURE__*/React.createElement(View, {\n    style: [styles.container, style]\n  }, /*#__PURE__*/React.createElement(View, {\n    style: [headerContainerStyle, {\n      height: headerHeight\n    }],\n    onLayout: e => {\n      if (!headerHeight) setCurrentHeaderHeight(e.nativeEvent.layout.height);\n    }\n  }, header), /*#__PURE__*/React.createElement(View, {\n    style: [backLayerContainerStyle, {\n      height: backLayerHeight\n    }],\n    onLayout: e => {\n      if (!backLayerHeight) setCurrentBackLayerHeight(e.nativeEvent.layout.height);\n    }\n  }, backLayer), /*#__PURE__*/React.createElement(Surface, {\n    style: [styles.frontLayer, {\n      top: currentHeaderHeight,\n      transform: [{\n        translateY\n      }]\n    }, frontLayerContainerStyle]\n  }, subheader && /*#__PURE__*/React.createElement(View, {\n    style: [subheaderContainerStyle, {\n      height: subheaderHeight\n    }],\n    onLayout: e => {\n      if (!subheaderHeight) setCurrentSubheaderHeight(e.nativeEvent.layout.height);\n    }\n  }, subheader), children));\n};\n\nexport default Backdrop;","map":{"version":3,"mappings":"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","names":["React","useEffect","useRef","useState","Animated","useWindowDimensions","View","Surface","useStyles","Backdrop","_ref","revealed","header","headerHeight","backLayer","backLayerHeight","subheader","subheaderHeight","style","headerContainerStyle","backLayerContainerStyle","frontLayerContainerStyle","subheaderContainerStyle","children","currentHeaderHeight","setCurrentHeaderHeight","currentBackLayerHeight","setCurrentBackLayerHeight","currentSubheaderHeight","setCurrentSubheaderHeight","styles","_ref2","palette","container","flex","backgroundColor","primary","main","overflow","frontLayer","position","start","end","bottom","surface","borderTopStartRadius","borderTopEndRadius","borderBottomStartRadius","borderBottomEndRadius","elevation","animated","Value","current","timing","toValue","duration","useNativeDriver","dimensions","translateY","interpolate","inputRange","outputRange","height","onLayout","e","nativeEvent","layout","top","transform"],"sources":["/home/francecsco/Scrivania/Sito-React/node_modules/@react-native-material/core/lib/module/Backdrop.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Animated, StyleProp, useWindowDimensions, View, ViewProps, ViewStyle } from 'react-native';\nimport Surface from './Surface';\nimport { useStyles } from './hooks/use-styles';\n\nexport interface BackdropProps {\n  revealed?: boolean;\n\n  header?: React.ReactElement | null;\n\n  headerHeight?: number;\n\n  backLayer?: React.ReactElement | null;\n\n  backLayerHeight?: number;\n\n  subheader?: React.ReactElement | null;\n\n  subheaderHeight?: number;\n\n  style?: StyleProp<ViewStyle>;\n\n  headerContainerStyle?: StyleProp<ViewStyle>;\n\n  backLayerContainerStyle?: StyleProp<ViewStyle>;\n\n  frontLayerContainerStyle?: Animated.AnimatedProps<ViewProps>['style'];\n\n  subheaderContainerStyle?: StyleProp<ViewStyle>;\n}\n\nconst Backdrop: React.FC<BackdropProps> = ({\n  revealed = false,\n  header,\n  headerHeight,\n  backLayer,\n  backLayerHeight,\n  subheader,\n  subheaderHeight,\n  style,\n  headerContainerStyle,\n  backLayerContainerStyle,\n  frontLayerContainerStyle,\n  subheaderContainerStyle,\n  children,\n}) => {\n  const [currentHeaderHeight, setCurrentHeaderHeight] = useState(headerHeight ?? 0);\n  const [currentBackLayerHeight, setCurrentBackLayerHeight] = useState(backLayerHeight ?? 0);\n  const [currentSubheaderHeight, setCurrentSubheaderHeight] = useState(subheaderHeight ?? 0);\n\n  const styles = useStyles(({ palette }) => ({\n    container: {\n      flex: 1,\n      backgroundColor: palette.primary.main,\n      overflow: 'hidden',\n    },\n    frontLayer: {\n      position: 'absolute',\n      start: 0,\n      end: 0,\n      bottom: 0,\n      backgroundColor: palette.surface.main,\n      borderTopStartRadius: 16,\n      borderTopEndRadius: 16,\n      borderBottomStartRadius: 0,\n      borderBottomEndRadius: 0,\n      elevation: 1,\n    },\n  }));\n\n  const animated = useRef(new Animated.Value(revealed ? 1 : 0)).current;\n\n  useEffect(() => {\n    Animated.timing(animated, {\n      toValue: revealed ? 1 : 0,\n      duration: 300,\n      useNativeDriver: true,\n    }).start();\n  }, [revealed]);\n\n  const dimensions = useWindowDimensions();\n\n  const translateY = animated.interpolate({\n    inputRange: [0, 1],\n    outputRange: [\n      0,\n      dimensions.height < currentHeaderHeight + currentBackLayerHeight\n        ? dimensions.height - currentHeaderHeight - currentSubheaderHeight\n        : currentBackLayerHeight,\n    ],\n  });\n\n  return (\n    <View style={[styles.container, style]}>\n      <View\n        style={[headerContainerStyle, { height: headerHeight }]}\n        onLayout={(e) => {\n          if (!headerHeight) setCurrentHeaderHeight(e.nativeEvent.layout.height);\n        }}\n      >\n        {header}\n      </View>\n\n      <View\n        style={[backLayerContainerStyle, { height: backLayerHeight }]}\n        onLayout={(e) => {\n          if (!backLayerHeight) setCurrentBackLayerHeight(e.nativeEvent.layout.height);\n        }}\n      >\n        {backLayer}\n      </View>\n\n      <Surface\n        style={[styles.frontLayer, { top: currentHeaderHeight, transform: [{ translateY }] }, frontLayerContainerStyle]}\n      >\n        {subheader && (\n          <View\n            style={[subheaderContainerStyle, { height: subheaderHeight }]}\n            onLayout={(e) => {\n              if (!subheaderHeight) setCurrentSubheaderHeight(e.nativeEvent.layout.height);\n            }}\n          >\n            {subheader}\n          </View>\n        )}\n\n        {children}\n      </Surface>\n    </View>\n  );\n};\n\nexport default Backdrop;\n"]},"metadata":{},"sourceType":"module"}